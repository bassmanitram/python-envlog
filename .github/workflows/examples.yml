name: Examples

on:
  push:
    branches:
      - main
      - develop
      - 'feature/**'
  pull_request:
    branches:
      - main
      - develop
      - 'feature/**'

jobs:
  test-examples:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.8", "3.10", "3.12"]

    steps:
    - uses: actions/checkout@v5

    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v6
      with:
        python-version: ${{ matrix.python-version }}

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -e .

    - name: Test basic usage
      run: |
        python -c "
        import logging
        import envlog
        import os
        os.environ['PTHN_LOG'] = 'debug'
        envlog.configure()
        logger = logging.getLogger('test')
        logger.debug('Debug message')
        print('✓ Basic usage works')
        "

    - name: Test logger configuration
      run: |
        python -c "
        import logging
        import envlog
        import os
        os.environ['PTHN_LOG'] = 'info,requests=warning,urllib3=error'
        envlog.configure()
        logger = logging.getLogger('test')
        logger.info('Info message')
        print('✓ Logger configuration works')
        "
